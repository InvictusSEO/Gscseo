<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- 1. THE HIJACK: Define the version we want BEFORE any other script can. -->
    <!-- 2. THE LOCKDOWN: Pre-load React 18 and FREEZE it on the window object. -->
    <script src="https://unpkg.com/react@18.3.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js"></script>
    <script>
      (function() {
        // Lock the global React objects so they cannot be overwritten by injected scripts
        if (window.React) {
          Object.defineProperty(window, 'React', { value: window.React, writable: false, configurable: false });
          Object.defineProperty(window, 'ReactDOM', { value: window.ReactDOM, writable: false, configurable: false });
          console.log('React 18.3.1 Kernel Locked.');
        }

        // Mutation Guard: Watch for any attempt to inject React 19 scripts or maps
        const guard = () => {
          const scripts = document.getElementsByTagName('script');
          for (let i = 0; i < scripts.length; i++) {
            const s = scripts[i];
            // If it's a second importmap or contains React 19 in URL, kill it
            if ((s.type === 'importmap' && s.innerHTML.includes('19.')) || 
                (s.src && s.src.includes('react@19')) || 
                (s.src && s.src.includes('react@^19'))) {
              console.error('SHIELD: Vaporized unauthorized React 19 injection.');
              s.remove();
            }
          }
        };
        const observer = new MutationObserver(guard);
        observer.observe(document.documentElement, { childList: true, subtree: true });
        guard();
      })();
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visibility Analyzer | SEO Insights</title>
    
    <!-- 3. CSP: Forbid browser from fetching anything related to React 19 from CDNs -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com https://esm.sh; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://api.dicebear.com https://*.googleusercontent.com; connect-src 'self' https://*.googleapis.com;">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ['Inter', 'sans-serif'] },
            animation: {
              'fade-in': 'fadeIn 0.4s ease-out forwards',
              'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
              'pulse-soft': 'pulseSoft 2s infinite',
            },
            keyframes: {
              fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
              slideUp: { '0%': { transform: 'translateY(12px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
              pulseSoft: { '0%, 100%': { opacity: '1' }, '50%': { opacity: '0.7' } },
            }
          }
        }
      }
    </script>
    <style type="text/tailwindcss">
      @layer base { body { @apply bg-[#f8fafc] text-slate-900; } }
      @layer components {
        .glass-card { @apply bg-white/90 backdrop-blur-md border border-slate-200/60 shadow-xl shadow-slate-200/40; }
        .btn-indigo { @apply bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-600/20 active:scale-95 transition-all; }
      }
    </style>
  </head>
  <body class="antialiased selection:bg-indigo-100 selection:text-indigo-900">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
